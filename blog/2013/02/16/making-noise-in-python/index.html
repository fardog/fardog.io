<!doctype html><html lang=en-us><head><title>Making noise in Python | fardog.io</title>
<meta name=generator content="Hugo 0.128.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="dark light"><meta name=author content="Nathan Wittstock"><meta name=description content="I&rsquo;ve been working with PyAudio lately, on a project to synchronize sound streams across multiple devices. Nothing to say on that front yet, but I do have a nice snippet for programatically generating a tone:
import math import numpy import pyaudio def sine(frequency, length, rate): length = int(length * rate) factor = float(frequency) * (math.pi * 2) / rate return numpy.sin(numpy.arange(length) * factor) def play_tone(stream, frequency=440, length=1, rate=44100): chunks = [] chunks."><meta name=referrer content="no-referrer"><link rel=canonical href=https://fardog.io/blog/2013/02/16/making-noise-in-python/><link rel="shortcut icon" type=image/vnd.microsoft.icon href=/favicon.ico><link rel=stylesheet href=/main.min.9637009c6b01416517e2b0e76a0530c7038e1c72499cd53ae621955c3631a6f5a07d4c5b7de66c4c27dfa27d92de278cc57ac5e5994409027ddc733b09dec622.css integrity="sha512-ljcAnGsBQWUX4rDnagUwxwOOHHJJnNU65iGVXDYxpvWgfUxbfeZsTCffon2S3ieMxXrF5ZlECQJ93HM7Cd7GIg=="><meta itemprop=name content="Making noise in Python"><meta itemprop=description content="I’ve been working with PyAudio lately, on a project to synchronize sound streams across multiple devices. Nothing to say on that front yet, but I do have a nice snippet for programatically generating a tone:
import math import numpy import pyaudio def sine(frequency, length, rate): length = int(length * rate) factor = float(frequency) * (math.pi * 2) / rate return numpy.sin(numpy.arange(length) * factor) def play_tone(stream, frequency=440, length=1, rate=44100): chunks = [] chunks."><meta itemprop=datePublished content="2013-02-16T14:44:00-07:00"><meta itemprop=dateModified content="2013-02-16T14:44:00-07:00"><meta itemprop=wordCount content="136"><meta itemprop=keywords content="Code,Python,PyAudio,Sound,Synthesizers"><meta property="og:url" content="https://fardog.io/blog/2013/02/16/making-noise-in-python/"><meta property="og:site_name" content="fardog.io"><meta property="og:title" content="Making noise in Python"><meta property="og:description" content="I’ve been working with PyAudio lately, on a project to synchronize sound streams across multiple devices. Nothing to say on that front yet, but I do have a nice snippet for programatically generating a tone:
import math import numpy import pyaudio def sine(frequency, length, rate): length = int(length * rate) factor = float(frequency) * (math.pi * 2) / rate return numpy.sin(numpy.arange(length) * factor) def play_tone(stream, frequency=440, length=1, rate=44100): chunks = [] chunks."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2013-02-16T14:44:00-07:00"><meta property="article:modified_time" content="2013-02-16T14:44:00-07:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Making noise in Python"><meta name=twitter:description content="I’ve been working with PyAudio lately, on a project to synchronize sound streams across multiple devices. Nothing to say on that front yet, but I do have a nice snippet for programatically generating a tone:
import math import numpy import pyaudio def sine(frequency, length, rate): length = int(length * rate) factor = float(frequency) * (math.pi * 2) / rate return numpy.sin(numpy.arange(length) * factor) def play_tone(stream, frequency=440, length=1, rate=44100): chunks = [] chunks."></head><body><header><nav><a title="Return to Blog" href=/blog/>&larr; Blog</a></nav><h1>Making noise in Python</h1></header><main><p>I&rsquo;ve been working with <a href=https://github.com/bastibe/PyAudio>PyAudio</a> lately, on a project to synchronize sound streams across multiple devices. Nothing to say on that front yet, but I do have a nice snippet for programatically generating a tone:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>math</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pyaudio</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>sine</span><span class=p>(</span><span class=n>frequency</span><span class=p>,</span> <span class=n>length</span><span class=p>,</span> <span class=n>rate</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>length</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>length</span> <span class=o>*</span> <span class=n>rate</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>factor</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>frequency</span><span class=p>)</span> <span class=o>*</span> <span class=p>(</span><span class=n>math</span><span class=o>.</span><span class=n>pi</span> <span class=o>*</span> <span class=mi>2</span><span class=p>)</span> <span class=o>/</span> <span class=n>rate</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>numpy</span><span class=o>.</span><span class=n>sin</span><span class=p>(</span><span class=n>numpy</span><span class=o>.</span><span class=n>arange</span><span class=p>(</span><span class=n>length</span><span class=p>)</span> <span class=o>*</span> <span class=n>factor</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>play_tone</span><span class=p>(</span><span class=n>stream</span><span class=p>,</span> <span class=n>frequency</span><span class=o>=</span><span class=mi>440</span><span class=p>,</span> <span class=n>length</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>rate</span><span class=o>=</span><span class=mi>44100</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>chunks</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=n>chunks</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>sine</span><span class=p>(</span><span class=n>frequency</span><span class=p>,</span> <span class=n>length</span><span class=p>,</span> <span class=n>rate</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>chunk</span> <span class=o>=</span> <span class=n>numpy</span><span class=o>.</span><span class=n>concatenate</span><span class=p>(</span><span class=n>chunks</span><span class=p>)</span> <span class=o>*</span> <span class=mf>0.25</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>stream</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>chunk</span><span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=n>numpy</span><span class=o>.</span><span class=n>float32</span><span class=p>)</span><span class=o>.</span><span class=n>tostring</span><span class=p>())</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>p</span> <span class=o>=</span> <span class=n>pyaudio</span><span class=o>.</span><span class=n>PyAudio</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>stream</span> <span class=o>=</span> <span class=n>p</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=nb>format</span><span class=o>=</span><span class=n>pyaudio</span><span class=o>.</span><span class=n>paFloat32</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=n>channels</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>rate</span><span class=o>=</span><span class=mi>44100</span><span class=p>,</span> <span class=n>output</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>play_tone</span><span class=p>(</span><span class=n>stream</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>stream</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>p</span><span class=o>.</span><span class=n>terminate</span><span class=p>()</span>
</span></span></code></pre></div><p>This simply generates a sine wave of a specified frequency and length, and writes it out to an already open PyAudio stream. A pleasant tone is produced. It&rsquo;s not too fancy, but it beats loading a wave file from disk.</p></main><footer role=contentinfo>© 2024 Nathan Wittstock
—
Content: <a href=https://creativecommons.org/licenses/by/4.0/ target=_blank>CC BY 4.0</a>,
Code: <a href=https://github.com/fardog/fardog.io/blob/master/LICENSE target=_blank>MIT</a>, unless otherwise noted.<p class="f6 fw6 pv0 mv2">View the
<a href=https://github.com/fardog/fardog.io/ target=_blank>source</a>
for this site.
<a href=https://fardog.io/privacy/>Privacy</a>.</p></footer></body></html>